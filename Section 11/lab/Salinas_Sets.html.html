<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset=UTF-8>
        <title>JavaScript - Salinas - Section 11</title>
    </head>
    <body>
        <h1>Bingo!</h1>

        <input type="button" value="Call Number" id="callNumberBtn">
        <input type="button" value="Verify and Reset" id="resetGameBtn">

        <div id="numberCalled"></div>
        <div id="validateNumbers"></div>
        
        <script>
            function loadOriginalNumbers() {
                numbers
                .add("B1")
                .add("B2")
                .add("B3")
                .add("B4")
                .add("B5")
                .add("B6")
                .add("B7")
                .add("B8")
                .add("B9")
                .add("B10")
                .add("B11")
                .add("B12")
                .add("B13")
                .add("B14")
                .add("B15")
                .add("I16")
                .add("I17")
                .add("I18")
                .add("I19")
                .add("I20")
                .add("I21")
                .add("I22")
                .add("I23")
                .add("I24")
                .add("I25")
                .add("I26")
                .add("I27")
                .add("I28")
                .add("I29")
                .add("I30")
                .add("N31")
                .add("N32")
                .add("N33")
                .add("N35")
                .add("N35")
                .add("N36")
                .add("N37")
                .add("N38")
                .add("N39")
                .add("N40")
                .add("N41")
                .add("N42")
                .add("N43")
                .add("N44")
                .add("N45")
                .add("G46")
                .add("G47")
                .add("G48")
                .add("G49")
                .add("G50")
                .add("G51")
                .add("G52")
                .add("G53")
                .add("G54")
                .add("G55")
                .add("G56")
                .add("G57")
                .add("G58")
                .add("G59")
                .add("G60")
                .add("O61")
                .add("O62")
                .add("O63")
                .add("O64")
                .add("O65")
                .add("O66")
                .add("O67")
                .add("O68")
                .add("O69")
                .add("O70")
                .add("O71")
                .add("O72")
                .add("O73")
                .add("O74")
                .add("O75");
            }

            function getRandomIntInclusive(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min)) + min; //The maximum is inclusive and the minimum is inclusive 
            }

            function callNumber(myNumber) {
                let myTarget = 0;
                for (let key of numbers.keys()) {
                    if (myTarget++ === myNumber) {
                        return key;
                    }
                }
            }

            let numbers = new Set()

            loadOriginalNumbers();
            
            let playedNumbers = new Set();

            const CALLBUTTON = document.getElementById('callNumberBtn');
            const RESETGAMEBUTTON = document.getElementById('resetGameBtn');

            CALLBUTTON.disabled = false;

            CALLBUTTON.onclick = function() {
                document.getElementById('validateNumbers').innerHTML = '';
                if (numbers.size > 1) {
                    let randomSeed = getRandomIntInclusive(0, numbers.size);
                    //alert(callNumber(randomSeed));
                    let calledItem = callNumber(randomSeed);
                    document.getElementById('numberCalled').innerHTML = '';
                    playedNumbers.add(calledItem);
                    numbers.delete(calledItem);
                    document.getElementById('numberCalled').innerHTML += calledItem;
                }
                else {
                    document.getElementById('numberCalled').innerHTML = '';
                    document.getElementById('numberCalled').innerHTML += 'No numbers left!';
                    CALLBUTTON.disabled = true;
                }                
            }

            RESETGAMEBUTTON.onclick = function() {
                CALLBUTTON.disabled = false;
                document.getElementById('numberCalled').innerHTML = 'Played Numbers:';
                for (let verifyNumber of playedNumbers) {
                    document.getElementById('validateNumbers').innerHTML += verifyNumber + '<br/>';
                }                
                playedNumbers.clear();
                loadOriginalNumbers();
            }
        </script>        
    </body>
</html>